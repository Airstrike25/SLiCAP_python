

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SLiCAP Library &mdash; SLiCAP Programming 1.0.2020 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/myStyle.css" type="text/css" />
  

  
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="SLiCAP Programming 1.0.2020 documentation" href="index.html"/>
        <link rel="next" title="Execute" href="execute.html"/>
        <link rel="prev" title="Sub circuits" href="subCircuits.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="slicap-programming.html" class="icon icon-home"> SLiCAP Programming
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">SLiCAP open-source</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToDo.html">ToDo</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure.html">SLiCAP configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="math.html">SLiCAP math library</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrices.html">Building the MNA matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="pythonMaximaInterface.html">Python-Maxima interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="html.html">HTML reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parser.html">SLiCAP netlist parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="parsingMethod.html">Parsing method</a></li>
<li class="toctree-l1"><a class="reference internal" href="modelParams.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="subCircuits.html">Sub circuits</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SLiCAP Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#user-libraries">User libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execute.html">Execute</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="SLiCAPreference.html">SLiCAP Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="slicap-programming.html">SLiCAP Programming</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="slicap-programming.html">Docs</a> &raquo;</li>
        
      <li>SLiCAP Library</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/library.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="slicap-library">
<h1>SLiCAP Library<a class="headerlink" href="#slicap-library" title="Permalink to this headline">Â¶</a></h1>
<p>The SLiCAP library if found in the <code class="docutils literal"><span class="pre">lib/</span></code> sub directory of the SLiCAP install path.</p>
<p>Each library will be compiled into a circuit object (as defined in <code class="docutils literal"><span class="pre">SLiCAPprotos.py</span></code>). For this reason libraries start with a title line and end with the <code class="docutils literal"><span class="pre">.end</span></code> statement.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="n">Prototype</span> <span class="p">(</span><span class="n">sub</span><span class="p">)</span><span class="n">circuit</span> <span class="nb">object</span><span class="o">.</span> <span class="n">It</span> <span class="n">has</span> <span class="n">the</span> <span class="n">following</span> <span class="n">attributes</span> <span class="k">with</span> <span class="n">their</span>
    <span class="n">default</span> <span class="n">values</span><span class="p">:</span>
        
    <span class="n">title</span>      <span class="o">=</span> <span class="s1">&#39;&#39;</span>    <span class="c1"># Title of (sub) circuit</span>
    <span class="n">file</span>       <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># Name of the netlist file</span>
    <span class="n">lexer</span>      <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Tokenized input file</span>
    <span class="n">subCKT</span>     <span class="o">=</span> <span class="kc">False</span> <span class="c1"># True if sub circuit</span>
    <span class="n">elements</span>   <span class="o">=</span> <span class="p">{}</span>    <span class="c1"># Dictionary with the circuit&#39;s element  objects</span>
                       <span class="c1">#   key (str)  : element refDes</span>
                       <span class="c1">#   value (obj): associated element object</span>
    <span class="n">nodes</span>      <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># Connecting nodes to parent circuit</span>
    <span class="n">params</span>     <span class="o">=</span> <span class="p">{}</span>    <span class="c1"># Before expansion: Parameters that can be be passed </span>
                       <span class="c1"># from parent circuit (sub circuit only)</span>
                       <span class="c1"># key (sympy.Symbol)                  : model parameter </span>
                       <span class="c1">#                                       name</span>
                       <span class="c1"># value (sympy expression, int, float): parameter value </span>
                       <span class="c1">#                                       or expression</span>
                       <span class="c1"># After expansion: List with undefined parameters </span>
                       <span class="c1"># (sympy.Symbol) </span>
    <span class="n">parDefs</span>    <span class="o">=</span> <span class="p">{}</span>    <span class="c1"># Dictionary with paremeter definitions</span>
                       <span class="c1"># key (sympy.Symbol)                  : parameter name</span>
                       <span class="c1"># value (sympy expression, int, float): parameter value </span>
                       <span class="c1">#                                       or expression                                      </span>
    <span class="n">modelDefs</span>  <span class="o">=</span> <span class="p">{}</span>    <span class="c1"># Dictionary with model definitions found in </span>
                       <span class="c1"># the circuit:</span>
                       <span class="c1">#   key (str)  : model name</span>
                       <span class="c1">#   value (obj): modelDef object</span>
    <span class="n">circuits</span>   <span class="o">=</span> <span class="p">{}</span>    <span class="c1"># Dict with sub circuit definitions found in</span>
                       <span class="c1"># the netlist (before expansion)</span>
                       <span class="c1">#   key (str)  : sub circuit name</span>
                       <span class="c1">#   value (obj): circuit object</span>
    <span class="n">errors</span>     <span class="o">=</span> <span class="mi">0</span>     <span class="c1"># Number of errors found during checking (int)</span>
    <span class="n">libs</span>       <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># List with library files</span>
    <span class="n">indepVars</span>  <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># List with sources that can be used as signal source</span>
    <span class="n">depVars</span>    <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># List with dependent variables that can be used as </span>
                       <span class="c1"># detector</span>
    <span class="n">controlled</span> <span class="o">=</span> <span class="p">[]</span>    <span class="c1"># List with controlles sources that can be used as loop</span>
                       <span class="c1"># gain reference</span>
    <span class="n">varIndex</span>   <span class="o">=</span> <span class="p">{}</span>    <span class="c1"># Dictionary with index of node or dependent</span>
</pre></div>
</td></tr></table></div>
<p>The library file has the format of a SLiCAP netlist file and contains:</p>
<ol class="arabic">
<li><p class="first">The first line is the <code class="docutils literal"><span class="pre">title</span> <span class="pre">line</span></code></p>
<p>This line will be the <code class="docutils literal"><span class="pre">.title</span></code> attribute of the compiled circuit</p>
</li>
<li><p class="first">Definitions of global parameters: <code class="docutils literal"><span class="pre">.param</span></code> lines</p>
<p>Global parameters will be found in the <code class="docutils literal"><span class="pre">.params</span></code> attribute of the compiled circuit</p>
</li>
<li><p class="first">Definitions of models: <code class="docutils literal"><span class="pre">.model</span></code> lines</p>
<p>These model definitions will be found in the <code class="docutils literal"><span class="pre">.modelDefs</span></code> attribute of the compiled circuit</p>
</li>
<li><p class="first">Sub circuit definitions <code class="docutils literal"><span class="pre">.subckt</span> <span class="pre">...</span> <span class="pre">.ends</span></code> lines</p>
<p>These subcircuit definitions will be found in the <code class="docutils literal"><span class="pre">.circuits</span></code> attribute of the compiled circuit</p>
</li>
<li><p class="first">The last line only carries the <code class="docutils literal"><span class="pre">.end</span></code> command.</p>
</li>
</ol>
<p>Compilation of standard SLiCAP libraries is performed with the <code class="docutils literal"><span class="pre">makeLibraries</span> <span class="pre">function,</span> <span class="pre">defined</span> <span class="pre">in</span> <span class="pre">``SLiCAPyacc.py</span></code>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="c1"># Convert *char* keys in the .parDefs attribute into sympy symbols.</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">newKey</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">newKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">del</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">LIB</span><span class="o">.</span><span class="n">parDefs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">newKey</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">LIB</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">newKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">LIB</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">del</span><span class="p">(</span><span class="n">LIB</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="c1"># make the node list and check for the ground node</span>
    <span class="c1"># check the references (error)</span>
    <span class="c1"># make the list with IDs of independent variables</span>
    <span class="c1"># make the list with IDs of controlled sources</span>
    <span class="c1"># make the list with IDs of dependend variables</span>
    <span class="c1"># convert mainCircuit.params to list and put undefined params in it</span>
    <span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span><span class="p">[]</span>
    <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">varIndexPos</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">elmt</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span> <span class="o">+=</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">nodes</span>
        <span class="k">for</span> <span class="n">refID</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">refs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">refID</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">print</span> <span class="s2">&quot;Error: Could not find referenced element &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">refID</span><span class="p">)</span>
                <span class="n">mainCircuit</span><span class="o">.</span><span class="n">errors</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">INDEPSCRCS</span><span class="p">:</span>
            <span class="n">mainCircuit</span><span class="o">.</span><span class="n">indepVars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elmt</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">CONTROLLED</span><span class="p">:</span>
            <span class="n">mainCircuit</span><span class="o">.</span><span class="n">controlled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elmt</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">MODELS</span><span class="p">[</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="p">]</span><span class="o">.</span><span class="n">depVars</span><span class="p">)):</span>
            <span class="n">depVar</span> <span class="o">=</span> <span class="n">MODELS</span><span class="p">[</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="p">]</span><span class="o">.</span><span class="n">depVars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">mainCircuit</span><span class="o">.</span><span class="n">depVars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">depVar</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">elmt</span><span class="p">)</span>
            <span class="n">mainCircuit</span><span class="o">.</span><span class="n">varIndex</span><span class="p">[</span><span class="n">depVar</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">elmt</span><span class="p">]</span> <span class="o">=</span> <span class="n">varIndexPos</span>
            <span class="n">varIndexPos</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
<p>After compilation, the circuit object <code class="docutils literal"><span class="pre">LIB</span></code> holds all the data in a way that it can be used by the SLiCAP netlist parser.</p>
<p>If errors are found during the compilation of the SLiCAP libraries, checking of circuits is ignored.</p>
<div class="section" id="user-libraries">
<h2>User libraries<a class="headerlink" href="#user-libraries" title="Permalink to this headline">Â¶</a></h2>
<p>Compilation of user libraries is performed before the expansion of the circuit in which the library has been defined with an <code class="docutils literal"><span class="pre">.lib</span></code> command. The <code class="docutils literal"><span class="pre">addUserLibs()</span></code> function, defined in <code class="docutils literal"><span class="pre">SLiCAPyacc.py</span></code>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787</pre></div></td><td class="code"><div class="highlight"><pre><span></span>        <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">elmt</span><span class="p">]</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">par</span><span class="p">]</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="c1"># Add parameters used in parDef expressions to circuit.params</span>
    <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="p">[</span><span class="n">par</span><span class="p">]</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span><span class="p">))</span>
    <span class="c1"># Try to find required global parameter definitions for undefined params</span>
    <span class="n">undefined</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>        
        <span class="k">if</span> <span class="n">par</span> <span class="o">!=</span> <span class="n">ini</span><span class="o">.</span><span class="n">Laplace</span> <span class="ow">and</span> <span class="n">par</span> <span class="o">!=</span> <span class="n">ini</span><span class="o">.</span><span class="n">frequency</span> <span class="ow">and</span> <span class="n">par</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">LIB</span><span class="o">.</span><span class="n">parDefs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span> <span class="o">=</span> <span class="n">addGlobals</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">parDefs</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">undefined</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>
    <span class="n">mainCircuit</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">undefined</span>
    <span class="c1"># check for two connections per node (warning)</span>
    <span class="n">connections</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">connections</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">connections</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;Warning less than two connections at node: &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="c1"># Remove duplicate entries from node list and sort the list.&quot;</span>
    <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span>
    <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">if</span> <span class="s1">&#39;0&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="n">mainCircuit</span><span class="o">.</span><span class="n">errors</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span> <span class="s2">&quot;Error: could not find ground node &#39;0&#39;.&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="p">)):</span>
        <span class="n">mainCircuit</span><span class="o">.</span><span class="n">depVars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;V_&#39;</span> <span class="o">+</span> <span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">mainCircuit</span><span class="o">.</span><span class="n">varIndex</span><span class="p">[</span><span class="n">mainCircuit</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">varIndexPos</span>
        <span class="n">varIndexPos</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">mainCircuit</span>

<span class="k">def</span> <span class="nf">addGlobals</span><span class="p">(</span><span class="n">parDefs</span><span class="p">,</span> <span class="n">par</span><span class="p">):</span>
    <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Adds value or expression of the parameter &#39;par&#39; as well as the parameters </span>
<span class="s2">    in this expression given in the library to the parameter definitions in the</span>
<span class="s2">    dict &#39;parDefs&#39;.</span>
<span class="s2">    </span>
<span class="s2">    :param parDefs: Dictionary with key-value pair of parameters to which the </span>
<span class="s2">                    definition of the parameter &#39;par&#39; needs to added.</span>
<span class="s2">    :type parDefs: dict</span>
<span class="s2">    :param par: Parameter of which the definition needs to be added to the dict</span>
<span class="s2">                &#39;parDefs&#39;.</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="execute.html" class="btn btn-neutral float-right" title="Execute" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="subCircuits.html" class="btn btn-neutral" title="Sub circuits" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, SLiCAP development team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.2020',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>